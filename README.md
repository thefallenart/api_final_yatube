# API для Yatube

## Описание
API для проекта социальной сети Yatube. Проект реализован с помощью DRF.

## Доступный функционал
+ Для аутентификации используются JWT-токены.
+ У неаутентифицированных пользователей доступ к API должен быть только на чтение. Исключение — эндпоинт /follow/: доступ к нему должен предоставляться только аутентифицированным пользователям.
+ Аутентифицированным пользователям разрешено изменение и удаление своего контента, в остальных случаях доступ предоставляется только для чтения.
+ API позволяет осуществлять:
  - подписку на пользователей;
  - просмотр, создание, изменение и удаление публикаций;
  - просмотр списка групп и информации о группе по её id;
  - возможность добавления, редактирования, удаления своих комментариев и просмотр чужих.
+ Создана фильтрация по полям.
+ Cоздать группу можно через админ-зону.

## Установка
### Как запустить проект:
1.Клонировать репозиторий и перейти в него в командной строке:
```
git clone git@github.com:thefallenart/api_final_yatube.git
```
```
cd api_final_yatube
```
2.Cоздать и активировать виртуальное окружение:
```
python3 -m venv venv
```
```
# для OS Lunix и MacOS
source venv/bin/activate

# для OS Windows
source venv/Scripts/activate
```
3.Обновить pip:
```
python3 -m pip install --upgrade pip
```
4.Установить зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```
5.Выполнить миграции на уровне проекта:
```
python3 manage.py makemigrations
python3 manage.py migrate
```
6.Запустить проект, находясь в директории yatube_api, где расположен файл manage.py
```
python3 manage.py runserver
```
7.Создаем суперпользователя:
```
python3 manage.py createsuperuser
```
8.Сам проект располагается по адреcу:
```
http://127.0.0.1:8000
```
9.Админ-панель находится по адресу: http://127.0.0.1:8000/admin, через неё необходимо будет создать группы постов.

## Примеры запросов и ответов к API
1. Создание поста
Отправляем POST-запрос на адрес http://127.0.0.1:8000/api/v1/posts/ и передаём обязательное поле text, в заголовке указываем Authorization:Bearer <токен>. Пример запроса:
```
{
  "text": "Тестовый пост."
}
```
Пример ответа:
```
{
    "id": 1,
    "author": "user",
    "text": "Тестовый пост.",
    "pub_date": "2023-03-19T11:12:38.848100Z",
    "image": null,
    "group": null
}
```
2. В проекте API реализована пагинация (LimitOffsetPagination):
```
GET /api/v1/posts/?limit=2&offset=6
```
Такой GET-запрос вернёт два объекта, с пятого по шестой (или меньше, если в результате запроса менее 6 объектов).

Примеры запросов для неавторизованных пользователей
Неавторизованные пользователи работают с API только в режиме чтения, создать, изменить или удалить что-либо они не могут. Им доступны не все эндпоинты.
```
1. GET api/v1/posts/ - получить список всех публикаций.
При указании параметров limit и offset выдача должна работать с пагинацией.
limit - Количество публикаций на страницу.
offset - Номер страницы после которой начинать выдачу.
2. GET api/v1/posts/{id}/ - получение публикации по id.
3. GET api/v1/groups/ - получение списка доступных сообществ.
4. GET api/v1/groups/{id}/ - получение информации о сообществе по id.
5. GET api/v1/{post_id}/comments/ - получение всех комментариев к публикации.
6. GET api/v1/{post_id}/comments/{id}/ - получение комментария к публикации по id.
```
Полный список запросов API находятся в документации.

## Документация к API
Когда вы запустите проект, по адресу http://127.0.0.1:8000/redoc/ будет доступна документация для API Yatube.

